[{"content":"\n\n对于喜欢vim的同学们，在写代码的时候可能遇到一些不是太方便的事情，例如创建一个文件，在正常的IDE中都会创建一个头注释，作为说明，这块在VIM也是可以实现的\n\n\n\n```\n\"SET Comment START\nautocmd BufNewFile *.php,*.js,*.cpp exec \":call SetComment()\" |normal 10Go\nfunc SetComment()\n    if expand(\"%:e\") == 'php'\n        call setline(1, \"\u003c?php\")\n    elseif expand(\"%:e\") == 'js'\n        call setline(1, '//JavaScript file')\n    elseif expand(\"%:e\") == 'cpp'\n        call setline(1, '//C++ file')\n    endif\n    call append(1, '/**')\n    call append(2, ' * Create by YourName')\n    call append(3, ' * Mail: YourName@XXX.com')\n    call append(4, ' * Date: '.strftime(\"%Y-%m-%d\"))\n    call append(5, ' * Time: '.strftime(\"%H:%M:%S\"))\n    call append(6, ' */')\n\"    call append(7, '')\nendfunc\n```\n\n\n在创建文件的时候支持三种类型，分别是php，js，cpp这三类，如果有需要可以自己行扩展.\n","cover":"","link":"vim文件头注释.html","preview":"\u003cp\u003e对于喜欢vim的同学们，在写代码的时候可能遇到一些不是太方便的事情，例如创建一个文件，在正常的IDE中都会创建一个头注释，作为说明，这块在VIM也是可以实现的\u003c/p\u003e\n","title":"VIM 文件头注释"},{"content":"\n\n## 关于新年的心得\n\n转眼间，一年过去了，这一年发生了很多，离开了学校，走向了社会，也结束了实习生活，开始了一个上班族的日常生活。在毕业后的这半年里，很开心，很放肆，就这样过了半年，在跨年的时候，回望整个2017年，我发现，这半年我一直浮于世事, 未曾深刻的思考过未来应该怎么做？未来的路该怎么走？未来想成为什么样的人？也未曾思考过如何去继续和努力。\n\n\n\n在半年的工作里，收获了很多，见识了很多，了解了很多，但是却发现，丢失了一点--沉稳，心变得浮躁了，浮躁的接受新事物的速度很慢，学习速度很慢，自由写代码的时间少了，回望着半年的收获，总觉得自己的失去大于收获。\n\n希望在未来的一年里，能够沉得住气，快速而稳健的成长和进步。\n","cover":"","link":"2017-2018.html","preview":"\u003ch2\u003e关于新年的心得\u003c/h2\u003e\n\n\u003cp\u003e转眼间，一年过去了，这一年发生了很多，离开了学校，走向了社会，也结束了实习生活，开始了一个上班族的日常生活。在毕业后的这半年里，很开心，很放肆，就这样过了半年，在跨年的时候，回望整个2017年，我发现，这半年我一直浮于世事, 未曾深刻的思考过未来应该怎么做？未来的路该怎么走？未来想成为什么样的人？也未曾思考过如何去继续和努力。\u003c/p\u003e\n","title":"2017-2018"},{"content":"\n\n\n在工作中开发，用fis3的上传工具，今天在上传过程中产生了一个错误，google之后和我遇到的情况不太一样，我这个情况有点特殊，可能之后有朋友可能会遇到，所以记录下来。\n\n\n\n```\n/usr/local/lib/node_modules/fis3/node_modules/fis3-deploy-http-push/index.js:228\n        throw new Error(error.errmsg || error);\n        ^\nError: upload file [/actions/activity/v1/AcceptInvite.php] to [/home/homework/app/course] by receiver [http://test37.zuoyebang.cc/fisreceiver.php] error [500]\nat /usr/local/lib/node_modules/fis3/node_modules/fis3-deploy-http-push/index.js:228:19\nat /usr/local/lib/node_modules/fis3/node_modules/fis3-deploy-http-push/index.js:26:11\nat IncomingMessage.\u003canonymous\u003e (/usr/local/lib/node_modules/fis3/lib/util.js:1263:11)\nat emitNone (events.js:91:20)\nat IncomingMessage.emit (events.js:185:7)\nat endReadableNT (_stream_readable.js:974:12)\nat _combinedTickCallback (internal/process/next_tick.js:80:11)\nat process._tickCallback (internal/process/next_tick.js:104:9)\n```\n\n遇到这个问题，http 提示状态码 是 500 ，这块首先看看服务器接收文件有没有问题，检查上传文件是否可访问，检查被上传文件目录是否有权限，如果这些都没问题，你可能遇到了和我同样的问题（这种概率不大\n\n```\ncurl http://test.***.cc/fisreceiver.php\nI'm ready for that, you know.\n```\n\n反馈是正常的，所以应该不是程序的问题，然后我去检查nginx的日志，发现没有日志，这就很奇怪了。\n\n```\ndf -h \n```\n\n看了一下文件系统，满了。。。找到问题的关键了，所以遇到我得这种情况的概率很低，但是如果有朋友遇到这种情况，不妨考虑一下我这个解决思路。\n","cover":"","link":"fis3上传错误.html","preview":"\u003cp\u003e在工作中开发，用fis3的上传工具，今天在上传过程中产生了一个错误，google之后和我遇到的情况不太一样，我这个情况有点特殊，可能之后有朋友可能会遇到，所以记录下来。\u003c/p\u003e\n","title":"fis3上传错误"},{"content":"\n\n安装composer中，提示缺少一些扩展，php -m查询，果然缺少，但是发现phpinfo中都有啊。\n\n\n\n卧槽！卧槽！卧槽！什么情况！\n\n经过一番搜索，发现php cli模式下的配置文件和web下的配置文件不是一个（好low，才知道）。。。\n\nphp --ini 可以查看cli模式下的配置文件路径。\n\n```\nroot@ubuntu:/home/ubuntu# php --ini\nConfiguration File (php.ini) Path: /etc/php/7.0/cli\nLoaded Configuration File:         (none)\nScan for additional .ini files in: /etc/php/7.0/cli/conf.d\nAdditional .ini files parsed:      (none)\n```\n\n我猜测了一下，大致是说cli下的配置文件，是在/etc/php/7.0/cli目录下，但是下面那行的loaded Configuration File是none，说明没有啊，于是就在对应的目录下创建了文件。写了个空的php-cli.ini\n\n再次php --ini发现loaded Configuration File有了！！！有了！！！\n\nbut发现了一个事。报错。。\n\n```\nPHP Warning:  PHP Startup: Invalid library (maybe not a PHP library) '/usr/local/php7/ext/json.so' in Unknown on line 0\n```\n\n先抱着试试看的态度php -m一下。。果然！！！没有！！！\n\n然后开始纠结新的问题。为啥会报错呢。。。\n\n采用了最古老的办法，复制问题，浏览器粘贴，在stackOverflow中发现了我想要的答案，过滤到大量无效（不认识）的英文，发现了我想要的答案。\n\n```\nNot sure what caused this, but make clean then restarting phpize \u0026\u0026 ./configure \u0026\u0026 make \u0026\u0026 make install solved this sort of problem.\n```\n\n就是上面这句话。他说他不懂咋回事，但是执行make clean然后接着编译别的插件一个流程就行了。\n\n虽然我也不懂，但是又抱着试试看的态度执行了一遍。\n\n可以用了！！！\n\n貌似好像是缓存的因素。\n\n以上文章仅是个人猜测和实验。如有错误~求指点！！！\n","cover":"","link":"phpinfo中存在cli模式下不存在的模块.html","preview":"\u003cp\u003e安装composer中，提示缺少一些扩展，php -m查询，果然缺少，但是发现phpinfo中都有啊。\u003c/p\u003e\n","title":"php -m 不存在的模块，phpinfo中存在"},{"content":"\n\n关于扩展安装这块的步骤，单纯记录，大佬忽略。\n\n首先要下载mongodb的php扩展。\n\n\n\n```\nwget https://pecl.php.net/get/mongodb-1.1.1.tgz  \n\n// 接着解压并进入该文件夹 \n\ntar -zxvf ./mongodb-1.1.1.tgz \u0026\u0026 cd mongodb-1.1.1\n```\n\n接着就直接和其他的编译扩展是一个类型了。\n\n```\n// 路径自己替换一下，找到自己的phpize 和php-config就好\n\n/usr/local/php7/bin/phpize \u0026\u0026 ./configure --with-php-config=/usr/local/php7/bin/php-config\n\n// 然后把生成的mongodb.so复制到相应的位置。在php.ini中写入\n\nextension = mongodb.so;\n```\n\n然后重启php-fpm。访问php_info，显示已经安装了相应的扩展。\n\n\n","cover":"","link":"php7编译安装mongodb扩展.html","preview":"\u003cp\u003e关于扩展安装这块的步骤，单纯记录，大佬忽略。\u003c/p\u003e\n\n\u003cp\u003e首先要下载mongodb的php扩展。\u003c/p\u003e\n","title":"php7编译安装mongodb扩展"},{"content":"\n\n最近在学习yaf，装上yaf后，正常访问路径出错。因为是404，所以确定是nginx的重写规则问题，在google、百度了之后，看到网上的很多教程说鸟哥的手册写错了。\n\n\n\n```\nif (!-e $request_filename) {\n    rewrite ^/(.*)  /index.php/$1 last;\n  }\n\n// 把index.php 后面的/ 换成 ？ 变成如下：\n\nif (!-e $request_filename) {\n    rewrite ^/(.*)  /index.php?$1 last;\n}\n```\n\n尝试之后发现可以，因为公司用的重写规则就是 / 而不是 ？，更觉得不可能是鸟哥文档出错了呀。所以去查找了相关资料。\n\n发现，之所以使用url模式访问的时候，第一种的重写规则并没有起作用，也就是说访问的正常路径没有传到index.php（当然这是一种错误的思想，不过开始是这么想的）。接着又去查找资料，发现了tp的同样的重写规则的原理，发现tp是获取$_SERVER['PATH_INFO']这个变量。然后分割，然后去尝试在yaf下var_dump这个变量， NULL，果然出错，猜想或许yaf同样的用了同样的原理。于是搜索为什么没有这个变量，和nginx相关联后，发现$_SERVER这个服务器环境变量可以被nginx干预，也就是在nginx处理的时候，会从fastcgi传过来。接着搜索nginx的配置文件，发现了fastcgi的传到server的参数。\n\n```\nfastcgi_param  QUERY_STRING       $query_string;\nfastcgi_param  REQUEST_METHOD     $request_method;\nfastcgi_param  CONTENT_TYPE       $content_type;\nfastcgi_param  CONTENT_LENGTH     $content_length;\n\nfastcgi_param  SCRIPT_NAME        $fastcgi_script_name;\nfastcgi_param  REQUEST_URI        $request_uri;\nfastcgi_param  DOCUMENT_URI       $document_uri;\nfastcgi_param  DOCUMENT_ROOT      $document_root;\nfastcgi_param  SERVER_PROTOCOL    $server_protocol;\nfastcgi_param  REQUEST_SCHEME     $scheme;\nfastcgi_param  HTTPS              $https if_not_empty;\n\nfastcgi_param  GATEWAY_INTERFACE  CGI/1.1;\nfastcgi_param  SERVER_SOFTWARE    nginx/$nginx_version;\n\nfastcgi_param  REMOTE_ADDR        $remote_addr;\nfastcgi_param  REMOTE_PORT        $remote_port;\nfastcgi_param  SERVER_ADDR        $server_addr;\nfastcgi_param  SERVER_PORT        $server_port;\nfastcgi_param  SERVER_NAME        $server_name;\n\n# PHP only, required if PHP was built with --enable-force-cgi-redirect\nfastcgi_param  REDIRECT_STATUS    200;\n```\n\n然后并没有发现PATH_INFO，所以基本上已经接近真相了。\n\n然后去得到的现在的条件去查找，得到了下面的语句：\n\n```\nfastcgi_split_path_info ^(.+?\\.php)(/.*)$;\nset $path_info $fastcgi_path_info;\nfastcgi_param PATH_INFO       $path_info;\ntry_files $fastcgi_script_name =404;\n```\n\n构造path_info 并传过去。果然传过去之后，立刻就可以了。\n","cover":"","link":"yaf-nginx重写规则.html","preview":"\u003cp\u003e最近在学习yaf，装上yaf后，正常访问路径出错。因为是404，所以确定是nginx的重写规则问题，在google、百度了之后，看到网上的很多教程说鸟哥的手册写错了。\u003c/p\u003e\n","title":"yaf nginx重写规则"}]